{"SurveyEntry":{"SurveyID":"SV_74CArtrQmN7GGma","SurveyName":"CES-NOC-Select2 -test","SurveyDescription":null,"SurveyOwnerID":"UR_3QNMfwzdwhgrD0O","SurveyBrandID":"wlu","DivisionID":null,"SurveyLanguage":"EN","SurveyActiveResponseSet":"RS_bC9MtRFRWNSlrLw","SurveyStatus":"Inactive","SurveyStartDate":"0000-00-00 00:00:00","SurveyExpirationDate":"0000-00-00 00:00:00","SurveyCreationDate":"2025-07-21 10:02:48","CreatorID":"UR_3QNMfwzdwhgrD0O","LastModified":"2025-08-06 11:26:11","LastAccessed":"0000-00-00 00:00:00","LastActivated":"0000-00-00 00:00:00","Deleted":null},"SurveyElements":[{"SurveyID":"SV_74CArtrQmN7GGma","Element":"BL","PrimaryAttribute":"Survey Blocks","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":[{"Type":"Default","Description":"Default Question Block","ID":"BL_9FfUF5VN5Zb6xCe","BlockElements":[{"Type":"Question","QuestionID":"QID1"}],"Options":{"BlockLocking":"false","RandomizeQuestions":"false","BlockVisibility":"Expanded"}},{"Type":"Trash","Description":"Trash \/ Unused Questions","ID":"BL_2hho7YoJ1PVhAmq","BlockElements":[{"Type":"Question","QuestionID":"QID3"},{"Type":"Question","QuestionID":"QID5"},{"Type":"Question","QuestionID":"QID4"}]},{"Type":"Standard","SubType":"","Description":"Block 1","ID":"BL_dmMstpf0X1WAHeS","BlockElements":[{"Type":"Question","QuestionID":"QID2"},{"Type":"Page Break"}],"Options":{"BlockLocking":"false","RandomizeQuestions":"false","PreviousButton":"Re-enter your occupation","previousButtonMID":"","NextButton":"Proceed","nextButtonMID":"","previousButtonLibraryID":"","nextButtonLibraryID":""}}]},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"FL","PrimaryAttribute":"Survey Flow","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"Type":"Root","FlowID":"FL_1","Flow":[{"Type":"EmbeddedData","FlowID":"FL_4","EmbeddedData":[{"Description":"occupation-code","Type":"Recipient","Field":"occupation-code","VariableType":"String","DataVisibility":[],"AnalyzeText":false}]},{"Type":"Block","ID":"BL_9FfUF5VN5Zb6xCe","FlowID":"FL_2","Autofill":[]},{"Type":"Standard","ID":"BL_dmMstpf0X1WAHeS","FlowID":"FL_5","Autofill":[]},{"Type":"EmbeddedData","FlowID":"FL_8","EmbeddedData":[{"Description":"occupation-code","Type":"Recipient","Field":"occupation-code","VariableType":"String","DataVisibility":[],"AnalyzeText":false},{"Description":"occupation-name","Type":"Recipient","Field":"occupation-name","VariableType":"String","DataVisibility":[],"AnalyzeText":false},{"Description":"occupation-category","Type":"Recipient","Field":"occupation-category","VariableType":"String","DataVisibility":[],"AnalyzeText":false}]}],"Properties":{"Count":8}}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"PL","PrimaryAttribute":"Preview Link","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"PreviewType":"Public","PreviewID":"e3838849-4ee2-4cfd-ac56-39e3ac68396b"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"PROJ","PrimaryAttribute":"CORE","SecondaryAttribute":null,"TertiaryAttribute":"1.1.0","Payload":{"ProjectCategory":"CORE","SchemaVersion":"1.1.0"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"QC","PrimaryAttribute":"Survey Question Count","SecondaryAttribute":"5","TertiaryAttribute":null,"Payload":null},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"RS","PrimaryAttribute":"RS_bC9MtRFRWNSlrLw","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":null},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SCO","PrimaryAttribute":"Scoring","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"ScoringCategories":[],"ScoringCategoryGroups":[],"ScoringSummaryCategory":null,"ScoringSummaryAfterQuestions":0,"ScoringSummaryAfterSurvey":0,"DefaultScoringCategory":null,"AutoScoringCategory":null}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SO","PrimaryAttribute":"Survey Options","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"BackButton":"true","SaveAndContinue":"true","SurveyProtection":"PublicSurvey","BallotBoxStuffingPrevention":"false","NoIndex":"Yes","SecureResponseFiles":"true","SurveyExpiration":"None","SurveyTermination":"DefaultMessage","Header":"<!-- Select2 CSS -->\n<link href=\"https:\/\/cdn.jsdelivr.net\/npm\/select2@4.1.0-beta.1\/dist\/css\/select2.min.css\" rel=\"stylesheet\" \/><!-- jQuery (required by Select2) --><script src=\"https:\/\/code.jquery.com\/jquery-3.6.0.min.js\"><\/script><!-- Select2 JavaScript --><script src=\"https:\/\/cdn.jsdelivr.net\/npm\/select2@4.1.0-beta.1\/dist\/js\/select2.min.js\"><\/script>","Footer":"<script src=\"https:\/\/rafaelgottardo.github.io\/occupations-qualtrics\/occupations.js\n\"><\/script>","ProgressBarDisplay":"None","PartialData":"+1 week","ValidationMessage":null,"PreviousButton":"","NextButton":" \u2192 ","SurveyTitle":"Qualtrics Survey | Qualtrics Experience Management","SkinLibrary":"wlu","SkinType":"templated","Skin":{"brandingId":"6643674871","templateId":"*base","overrides":null},"NewScoring":1,"SurveyMetaDescription":"The most powerful, simple and trusted way to gather experience data. Start your journey to experience management and try a free account today.","footerMid":"","headerMid":"","EOSMessage":null,"ShowExportTags":"false","CollectGeoLocation":"false","PasswordProtection":"No","AnonymizeResponse":"No","RefererCheck":"No","BallotBoxStuffingPreventionBehavior":null,"BallotBoxStuffingPreventionMessage":null,"BallotBoxStuffingPreventionMessageLibrary":null,"BallotBoxStuffingPreventionURL":null,"RecaptchaV3":"false","ConfirmStart":false,"AutoConfirmStart":false,"RelevantID":"false","RelevantIDLockoutPeriod":"+30 days","UseCustomSurveyLinkCompletedMessage":null,"SurveyLinkCompletedMessage":null,"SurveyLinkCompletedMessageLibrary":null,"ResponseSummary":"No","EOSMessageLibrary":null,"EOSRedirectURL":null,"EmailThankYou":"false","ThankYouEmailMessageLibrary":null,"ThankYouEmailMessage":null,"ValidateMessage":"false","ValidationMessageLibrary":null,"InactiveSurvey":"DefaultMessage","PartialDeletion":null,"PartialDataCloseAfter":"LastActivity","InactiveMessageLibrary":null,"InactiveMessage":null,"AvailableLanguages":{"EN":[]},"SurveyName":"CES-NOC-Select2 -test"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SQ","PrimaryAttribute":"QID1","SecondaryAttribute":"What is your main occupation? A menu will appear below, please select the best option that appear...","TertiaryAttribute":null,"Payload":{"QuestionText":"What is your main occupation? A menu will appear below, please select the best option that appears. If you are retired please enter your former occupation.&nbsp;","DefaultChoices":false,"DataExportTag":"Q1","QuestionID":"QID1","QuestionType":"TE","Selector":"SL","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"What is your main occupation? A menu will appear below, please select the best option that appear...","Validation":{"Settings":{"ForceResponse":"OFF","Type":"None"}},"GradingData":[],"Language":[],"NextChoiceId":4,"NextAnswerId":1,"SearchSource":{"AllowFreeResponse":"false"},"QuestionJS":"Qualtrics.SurveyEngine.addOnload(function()\n{\n  const s = document.createElement(\"script\");\n  s.src = \"https:\/\/rafaelgottardo.github.io\/occupations-qualtrics\/occupations.js\";\n  document.head.appendChild(s);\n\n});\n\nQualtrics.SurveyEngine.addOnReady(function() {\n    jQuery(function() {\n\n        \/\/ Function to decode Unicode characters\n        function decodeUnicode(str) {\n            return str.replace(\/\\\\u[\\dA-F]{4}\/gi, function(match) {\n                return String.fromCharCode(parseInt(match.replace(\/\\\\u\/g, ''), 16));\n            });\n        }\n\n        \/\/ Normalize Unicode function\n        function normalizeString(str) {\n            return decodeUnicode(str).normalize('NFD').replace(\/[\\u0300-\\u036f]\/g, '').toLowerCase(); \/\/ Remove accents and lower case\n        }\n\n        \/\/ Prepare data for Select2\n        var select2Data = occupation_names.map(function(name, index) {\n            var decodedName = decodeUnicode(name);\n            var decodedCategory = decodeUnicode(occupation_category[index]); \/\/ Decode categories\n            return {\n                id: occupation_codes[index], \/\/ Use code as the id\n                text: decodedName, \/\/ Display name with decoded Unicode\n                category: decodedCategory \/\/ Display decoded category\n            };\n        });\n\n        console.log(\"Select2 Data:\", select2Data); \/\/ Debugging\n\n        \/\/ Ensure Select2 library is included before initialization\n        if (typeof jQuery.fn.select2 === 'function') {\n            jQuery(\".QR-QID1\").each(function() {\n                \/\/ Ensure the element exists before initializing Select2\n                if (jQuery(this).length) {\n                    jQuery(this).select2({\n                        data: select2Data,\n                        minimumInputLength: 3,\n                        matcher: function(params, data) {\n                            \/\/ If there are no search terms, return all data\n                            if ($.trim(params.term) === '') {\n                                return data;\n                            }\n\n                            \/\/ Normalize and case-insensitive comparison\n                            var normalizedParams = normalizeString(params.term);\n                            var normalizedDataText = normalizeString(data.text);\n\n                            \/\/ Check if the search term matches the text\n                            if (normalizedDataText.indexOf(normalizedParams) > -1) {\n                                return data;\n                            }\n\n                            \/\/ Return null if no match\n                            return null;\n                        },\n                        templateResult: function(item) {\n                            return item.text;\n                        },\n                        templateSelection: function(item) {\n                            return item.text;\n                        }\n                    });\n                }\n            });\n\n            \/\/ Handle selection change\n            jQuery(\".QR-QID1\").on('select2:select', function(e) {\n                var data = e.params.data;\n                \/\/ Set embedded data for occupation code, name, and category\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-name', data.text);\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-code', data.id);\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-category', data.category);\n            });\n        } else {\n            console.error(\"Select2 library is not loaded.\");\n        }\n    });\n});\n\n\n\n\n    Qualtrics.SurveyEngine.addOnPageSubmit(function() {\n        var selectedData = jQuery(\".QR-QID1\").select2('data')[0]; \/\/ Assuming single select\n        if (selectedData) {\n            \/\/ Set embedded data\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-name', selectedData.text);\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-code', selectedData.id);\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-category', selectedData.category);\n\n            \/\/ Update hidden input field (replace 'QIDhidden' with your hidden question ID)\n           \/\/ jQuery(\"#QIDhidden\").val(selectedData.id + \" - \" + selectedData.text + \" - \" + selectedData.category);\n        }\n    });"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SQ","PrimaryAttribute":"QID2","SecondaryAttribute":"You entered ${e:\/\/Field\/occupation-name} which corresponds to ${e:\/\/Field\/occupation-category}. I...","TertiaryAttribute":null,"Payload":{"QuestionText":"You entered ${e:\/\/Field\/occupation-name} which corresponds to ${e:\/\/Field\/occupation-category}. Is this correct? <br>If not go back to previous question.&nbsp;<br><br>If your occupation was not listed please enter it below:<br>","QuestionJS":"Qualtrics.SurveyEngine.addOnload(function()\n{\n\t\/*Place your JavaScript here to run when the page loads*\/\n\n});\n\n\nQualtrics.SurveyEngine.addOnload(function() {\n\n});\n\n\n\n\n\n\n\n\nQualtrics.SurveyEngine.addOnUnload(function()\n{\n\t\/*Place your JavaScript here to run when the page is unloaded*\/\n\n});","DefaultChoices":false,"DataExportTag":"Q2","QuestionID":"QID2","QuestionType":"TE","Selector":"SL","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"You entered ${e:\/\/Field\/occupation-name} which corresponds to ${e:\/\/Field\/occupation-category}. I...","Validation":{"Settings":{"ForceResponse":"OFF","Type":"None"}},"GradingData":[],"Language":[],"NextChoiceId":3,"NextAnswerId":1,"SearchSource":{"AllowFreeResponse":"false"}}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SQ","PrimaryAttribute":"QID3","SecondaryAttribute":"Click to write the question text","TertiaryAttribute":null,"Payload":{"QuestionText":"Click to write the question text","DefaultChoices":false,"DataExportTag":"Q3","QuestionType":"TE","Selector":"SL","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"Click to write the question text","Validation":{"Settings":{"ForceResponse":"OFF","Type":"None"}},"GradingData":[],"Language":[],"NextChoiceId":4,"NextAnswerId":1,"SearchSource":{"AllowFreeResponse":"false"},"QuestionID":"QID3"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SQ","PrimaryAttribute":"QID4","SecondaryAttribute":"What is your main occupation? A menu will appear below, please select the best option that appear...","TertiaryAttribute":null,"Payload":{"QuestionText":"What is your main occupation? A menu will appear below, please select the best option that appears. If you are retired please enter your former occupation.&nbsp;","QuestionJS":"Qualtrics.SurveyEngine.addOnload(function()\n{\n\t\/*Place your JavaScript here to run when the page loads*\/\n\n});\n\nQualtrics.SurveyEngine.addOnReady(function() {\n    jQuery(function() {\n\n        \/\/ Function to decode Unicode characters\n        function decodeUnicode(str) {\n            return str.replace(\/\\\\u[\\dA-F]{4}\/gi, function(match) {\n                return String.fromCharCode(parseInt(match.replace(\/\\\\u\/g, ''), 16));\n            });\n        }\n\n        \/\/ Normalize Unicode function\n        function normalizeString(str) {\n            return decodeUnicode(str).normalize('NFD').replace(\/[\\u0300-\\u036f]\/g, '').toLowerCase(); \/\/ Remove accents and lower case\n        }\n\n        \/\/ Prepare data for Select2\n        var select2Data = occupation_names.map(function(name, index) {\n            var decodedName = decodeUnicode(name);\n            var decodedCategory = decodeUnicode(occupation_category[index]); \/\/ Decode categories\n            return {\n                id: occupation_codes[index], \/\/ Use code as the id\n                text: decodedName, \/\/ Display name with decoded Unicode\n                category: decodedCategory \/\/ Display decoded category\n            };\n        });\n\n        console.log(\"Select2 Data:\", select2Data); \/\/ Debugging\n\n        \/\/ Ensure Select2 library is included before initialization\n        if (typeof jQuery.fn.select2 === 'function') {\n            jQuery(\".QR-QID1\").each(function() {\n                \/\/ Ensure the element exists before initializing Select2\n                if (jQuery(this).length) {\n                    jQuery(this).select2({\n                        data: select2Data,\n                        minimumInputLength: 3,\n                        matcher: function(params, data) {\n                            \/\/ If there are no search terms, return all data\n                            if ($.trim(params.term) === '') {\n                                return data;\n                            }\n\n                            \/\/ Normalize and case-insensitive comparison\n                            var normalizedParams = normalizeString(params.term);\n                            var normalizedDataText = normalizeString(data.text);\n\n                            \/\/ Check if the search term matches the text\n                            if (normalizedDataText.indexOf(normalizedParams) > -1) {\n                                return data;\n                            }\n\n                            \/\/ Return null if no match\n                            return null;\n                        },\n                        templateResult: function(item) {\n                            return item.text;\n                        },\n                        templateSelection: function(item) {\n                            return item.text;\n                        }\n                    });\n                }\n            });\n\n            \/\/ Handle selection change\n            jQuery(\".QR-QID\").on('select2:select', function(e) {\n                var data = e.params.data;\n                \/\/ Set embedded data for occupation code, name, and category\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-name', data.text);\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-code', data.id);\n                Qualtrics.SurveyEngine.setEmbeddedData('occupation-category', data.category);\n            });\n        } else {\n            console.error(\"Select2 library is not loaded.\");\n        }\n    });\n});\n\n\n\n\n    Qualtrics.SurveyEngine.addOnPageSubmit(function() {\n        var selectedData = jQuery(\".QR-QID14\").select2('data')[0]; \/\/ Assuming single select\n        if (selectedData) {\n            \/\/ Set embedded data\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-name', selectedData.text);\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-code', selectedData.id);\n            Qualtrics.SurveyEngine.setEmbeddedData('occupation-category', selectedData.category);\n\n            \/\/ Update hidden input field (replace 'QIDhidden' with your hidden question ID)\n            jQuery(\"#QIDhidden\").val(selectedData.id + \" - \" + selectedData.text + \" - \" + selectedData.category);\n        }\n    });","DefaultChoices":false,"DataExportTag":"Q4","QuestionType":"TE","Selector":"SL","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"What is your main occupation? A menu will appear below, please select the best option that appear...","DisplayLogic":{"0":{"0":{"ChoiceLocator":"q:\/\/QID2\/SelectableChoice\/1","Description":"<span class=\"Error\">Invalid Logic<\/span> <a href=\"javascript:void(0)\" clickcallback=\"Qualtrics.DisplayLogic.edit:DL_30042863\" instanceid=\"LE_58217132\">Click Here to Edit Logic<\/a>","LeftOperand":"q:\/\/QID2\/SelectableChoice\/1","LogicType":"Question","Operator":"Selected","QuestionID":"QID2","QuestionIDFromLocator":"QID2","QuestionIsInLoop":"no","Type":"Expression"},"Type":"If"},"Type":"BooleanExpression","inPage":false},"Validation":{"Settings":{"ForceResponse":"OFF","Type":"None"}},"GradingData":[],"Language":[],"NextChoiceId":4,"NextAnswerId":1,"SearchSource":{"AllowFreeResponse":"false"},"QuestionID":"QID4"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"SQ","PrimaryAttribute":"QID5","SecondaryAttribute":"Click to write the question text","TertiaryAttribute":null,"Payload":{"QuestionText":"Click to write the question text","DataExportTag":"Q5","QuestionType":"MC","Selector":"SAVR","SubSelector":"TX","DataVisibility":{"Private":false,"Hidden":false},"Configuration":{"QuestionDescriptionOption":"UseText"},"QuestionDescription":"Click to write the question text","Choices":{"1":{"Display":"Click to write Choice 1"},"2":{"Display":"Click to write Choice 2"},"3":{"Display":"Click to write Choice 3"}},"ChoiceOrder":["1","2","3"],"Validation":{"Settings":{"ForceResponse":"OFF","Type":"None"}},"Language":[],"NextChoiceId":4,"NextAnswerId":1,"QuestionID":"QID5"}},{"SurveyID":"SV_74CArtrQmN7GGma","Element":"STAT","PrimaryAttribute":"Survey Statistics","SecondaryAttribute":null,"TertiaryAttribute":null,"Payload":{"MobileCompatible":true,"ID":"Survey Statistics"}}]}